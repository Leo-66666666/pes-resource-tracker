<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub åŒæ­¥è®¾ç½®</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="section">
            <div class="header">
                <h1><i class="fab fa-github"></i> GitHub äº‘ç«¯åŒæ­¥è®¾ç½®</h1>
                <button onclick="window.location.href='index.html'" class="btn-small">
                    <i class="fas fa-arrow-left"></i> è¿”å›ä¸»ç•Œé¢
                </button>
            </div>
            
            <!-- éšç§è­¦å‘Š -->
            <div class="privacy-warning full-width">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>é‡è¦éšç§æç¤º</h3>
                <ul>
                    <li>ğŸ”’ æ‚¨çš„æ•°æ®å°†å­˜å‚¨åœ¨ç®¡ç†å‘˜çš„ GitHub ä»“åº“ä¸­</li>
                    <li>ğŸ‘ï¸ ç®¡ç†å‘˜å¯ä»¥çœ‹åˆ°æ‰€æœ‰ç”¨æˆ·çš„æ•°æ®</li>
                    <li>ğŸš« è¯·å‹¿å­˜å‚¨ä»»ä½•æ•æ„Ÿä¸ªäººä¿¡æ¯ï¼š</li>
                    <li class="warning-item">â€¢ çœŸå®å§“åã€èº«ä»½è¯å·ã€ç”µè¯å·ç </li>
                    <li class="warning-item">â€¢ ä½å€ã€å·¥ä½œå•ä½ç­‰ä¸ªäººä¿¡æ¯</li>
                    <li class="warning-item">â€¢ é“¶è¡Œå¡å·ã€å¯†ç ç­‰è´¢åŠ¡ä¿¡æ¯</li>
                    <li>âœ… åªè®°å½•æ¸¸æˆèµ„æºæ•°æ®å³å¯</li>
                </ul>
                <p>ç»§ç»­ä½¿ç”¨å³è¡¨ç¤ºæ‚¨å·²é˜…è¯»å¹¶åŒæ„ä»¥ä¸Šéšç§æ¡æ¬¾ã€‚</p>
            </div>
            
            <div class="sync-options">
                <h2><i class="fas fa-cloud"></i> åŒæ­¥é€‰é¡¹</h2>
                
                <div class="option-card">
                    <h3><i class="fas fa-laptop-house"></i> ä»…æœ¬åœ°å­˜å‚¨</h3>
                    <p>æ•°æ®ä»…ä¿å­˜åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•åœ°æ–¹ã€‚</p>
                    <ul>
                        <li>âœ… æœ€é«˜éšç§ä¿æŠ¤</li>
                        <li>âœ… æ— éœ€ç½‘ç»œè¿æ¥</li>
                        <li>âŒ æ¢è®¾å¤‡ä¼šä¸¢å¤±æ•°æ®</li>
                        <li>âŒ æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ä¼šä¸¢å¤±æ•°æ®</li>
                    </ul>
                    <button onclick="setSyncMode('local')" class="btn-option" id="local-btn">
                        <i class="fas fa-check-circle"></i> ä½¿ç”¨æ­¤æ¨¡å¼
                    </button>
                </div>
                
                <div class="option-card">
                    <h3><i class="fab fa-github"></i> GitHub äº‘ç«¯åŒæ­¥ï¼ˆæ¨èï¼‰</h3>
                    <p>æ•°æ®å°†åŒæ­¥åˆ°ç®¡ç†å‘˜çš„ GitHub ä»“åº“ï¼Œæ”¯æŒè·¨è®¾å¤‡è®¿é—®ã€‚</p>
                    <ul>
                        <li>âœ… è·¨è®¾å¤‡åŒæ­¥</li>
                        <li>âœ… æ•°æ®æ°¸ä¹…ä¿å­˜</li>
                        <li>âœ… æ¯å¤©è‡ªåŠ¨å¤‡ä»½</li>
                        <li>âš ï¸ ç®¡ç†å‘˜å¯æŸ¥çœ‹æ•°æ®</li>
                        <li>âš ï¸ æ¯å¤©é™åŒæ­¥1æ¬¡</li>
                    </ul>
                    <button onclick="setSyncMode('github')" class="btn-option" id="github-btn">
                        <i class="fas fa-check-circle"></i> ä½¿ç”¨æ­¤æ¨¡å¼
                    </button>
                </div>
                
                <div class="option-card">
                    <h3><i class="fas fa-user-secret"></i> é«˜çº§ï¼šä½¿ç”¨è‡ªå·±çš„ GitHub</h3>
                    <p>ä½¿ç”¨æ‚¨è‡ªå·±çš„ GitHub è´¦å·å­˜å‚¨æ•°æ®ï¼Œç®¡ç†å‘˜æ— æ³•æŸ¥çœ‹ã€‚</p>
                    <div class="advanced-form" id="advanced-form">
                        <div class="form-group">
                            <label><i class="fab fa-github"></i> GitHub ç”¨æˆ·å</label>
                            <input type="text" id="github-username" placeholder="æ‚¨çš„GitHubç”¨æˆ·å">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-key"></i> Personal Access Token</label>
                            <input type="password" id="github-token" 
                                   placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
                            <p class="help-text">
                                <a href="https://github.com/settings/tokens" target="_blank">
                                    <i class="fas fa-external-link-alt"></i> å¦‚ä½•è·å–Tokenï¼Ÿ
                                </a>
                            </p>
                        </div>
                        <button onclick="saveAdvancedSettings()" class="btn-save">
                            <i class="fas fa-save"></i> ä¿å­˜é«˜çº§è®¾ç½®
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- åŒæ­¥çŠ¶æ€ -->
            <div class="sync-status-panel">
                <h2><i class="fas fa-chart-bar"></i> å½“å‰åŒæ­¥çŠ¶æ€</h2>
                <div class="status-info">
                    <p><strong>å­˜å‚¨æ¨¡å¼ï¼š</strong> <span id="current-mode">æœ¬åœ°å­˜å‚¨</span></p>
                    <p><strong>ä»Šæ—¥å·²åŒæ­¥ï¼š</strong> <span id="syncs-today">0</span> æ¬¡</p>
                    <p><strong>æœ€ååŒæ­¥æ—¶é—´ï¼š</strong> <span id="last-sync">ä»æœªåŒæ­¥</span></p>
                    <p><strong>æ€»æ•°æ®å¤§å°ï¼š</strong> <span id="data-size">0 KB</span></p>
                </div>
            </div>
            
            <div class="form-actions">
                <button onclick="testConnection()" class="btn-test">
                    <i class="fas fa-plug"></i> æµ‹è¯•è¿æ¥
                </button>
                <button onclick="forceSync()" id="force-sync-btn" class="btn-sync" disabled>
                    <i class="fas fa-sync-alt"></i> ç«‹å³åŒæ­¥
                </button>
                <button onclick="clearAllData()" class="btn-danger">
                    <i class="fas fa-trash"></i> æ¸…é™¤æ‰€æœ‰æ•°æ®
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // åŠ è½½å½“å‰è®¾ç½®
        document.addEventListener('DOMContentLoaded', function() {
            loadSyncSettings();
        });
        
        function loadSyncSettings() {
            const settings = JSON.parse(localStorage.getItem('pes_sync_settings') || '{}');
            
            document.getElementById('current-mode').textContent = 
                settings.mode === 'github' ? 'GitHubäº‘ç«¯åŒæ­¥' : 'æœ¬åœ°å­˜å‚¨';
            
            if (settings.lastSync) {
                document.getElementById('last-sync').textContent = 
                    new Date(settings.lastSync).toLocaleString();
            }
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            updateOptionButtons(settings.mode || 'local');
            
            // æ˜¾ç¤ºé«˜çº§è®¾ç½®
            if (settings.githubUsername) {
                document.getElementById('github-username').value = settings.githubUsername;
            }
        }
        
        function setSyncMode(mode) {
            const settings = JSON.parse(localStorage.getItem('pes_sync_settings') || '{}');
            settings.mode = mode;
            localStorage.setItem('pes_sync_settings', JSON.stringify(settings));
            
            updateOptionButtons(mode);
            
            alert(`å·²åˆ‡æ¢åˆ°${mode === 'github' ? 'GitHubäº‘ç«¯åŒæ­¥' : 'æœ¬åœ°å­˜å‚¨'}æ¨¡å¼`);
            window.location.reload();
        }
        
        function updateOptionButtons(selectedMode) {
            document.getElementById('local-btn').className = 
                selectedMode === 'local' ? 'btn-option selected' : 'btn-option';
            document.getElementById('github-btn').className = 
                selectedMode === 'github' ? 'btn-option selected' : 'btn-option';
        }
        
        function saveAdvancedSettings() {
            const username = document.getElementById('github-username').value.trim();
            const token = document.getElementById('github-token').value.trim();
            
            if (!username || !token) {
                alert('è¯·å¡«å†™GitHubç”¨æˆ·åå’ŒToken');
                return;
            }
            
            const settings = JSON.parse(localStorage.getItem('pes_sync_settings') || '{}');
            settings.githubUsername = username;
            settings.githubToken = token;
            settings.mode = 'github';
            localStorage.setItem('pes_sync_settings', JSON.stringify(settings));
            
            alert('é«˜çº§è®¾ç½®å·²ä¿å­˜ï¼');
            updateOptionButtons('github');
        }
        
        function testConnection() {
            const settings = JSON.parse(localStorage.getItem('pes_sync_settings') || '{}');
            
            if (settings.mode === 'github') {
                // è¿™é‡Œåº”è¯¥è°ƒç”¨GitHub APIæµ‹è¯•è¿æ¥
                alert('GitHubè¿æ¥æµ‹è¯•åŠŸèƒ½å°†åœ¨ä¸»é¡µé¢å®ç°');
            } else {
                alert('å½“å‰ä¸ºæœ¬åœ°å­˜å‚¨æ¨¡å¼ï¼Œæ— éœ€è¿æ¥æµ‹è¯•');
            }
        }
        
        function forceSync() {
            if (confirm('ç¡®å®šè¦ç«‹å³åŒæ­¥æ‰€æœ‰æ•°æ®åˆ°GitHubå—ï¼Ÿ')) {
                alert('åŒæ­¥åŠŸèƒ½å°†åœ¨ä¸»é¡µé¢å®ç°');
            }
        }
        
        function clearAllData() {
            if (confirm('è­¦å‘Šï¼šè¿™å°†æ¸…é™¤æ‰€æœ‰æœ¬åœ°æ•°æ®ï¼ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                localStorage.clear();
                alert('æ‰€æœ‰æ•°æ®å·²æ¸…é™¤ï¼Œé¡µé¢å°†åˆ·æ–°');
                window.location.reload();
            }
        }
    </script>
</body>
</html>